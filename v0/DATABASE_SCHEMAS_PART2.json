{
  "schemas": {
    "Transaction": {
      "modelName": "Transaction",
      "collectionName": "transactions",
      "description": "Financial transactions including deposits, withdrawals, transfers, and bonuses",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "type": {"type": "String", "enum": ["deposit", "withdrawal", "transfer", "bonus"], "required": true},
        "amount": {"type": "Number", "required": true},
        "reference": {"type": "String", "required": true, "description": "Unique transaction reference"},
        "status": {"type": "String", "enum": ["pending", "confirmed", "failed"], "required": true},
        "txId": {"type": "String", "unique": true, "sparse": true},
        "fromUser": {"type": "ObjectId", "ref": "User", "description": "For P2P transfers"},
        "toUser": {"type": "ObjectId", "ref": "User", "description": "For P2P transfers"},
        "fee": {"type": "Number"},
        "netAmount": {"type": "Number"},
        "requiresAdminApproval": {"type": "Boolean", "default": false},
        "processedAt": {"type": "Date"},
        "walletAddress": {"type": "String"},
        "method": {"type": "String", "enum": ["nowpayments", "internal", "bonus", "manual"]},
        "note": {"type": "String"},
        "timestamp": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User"},
        "fromUser": {"type": "many-to-one", "model": "User"},
        "toUser": {"type": "many-to-one", "model": "User"}
      },
      "indexes": ["reference (unique)", "user", "status", "timestamp (descending)"],
      "example": {
        "_id": "507f1f77bcf86cd799439071",
        "user": "507f1f77bcf86cd799439011",
        "type": "deposit",
        "amount": 500,
        "reference": "TXN-2024-001234",
        "status": "confirmed",
        "txId": "nowpay_abc123xyz",
        "method": "nowpayments",
        "timestamp": "2024-10-01T10:30:00.000Z",
        "processedAt": "2024-10-01T10:35:00.000Z"
      }
    },
    "WithdrawalRequest": {
      "modelName": "WithdrawalRequest",
      "collectionName": "withdrawalrequests",
      "description": "User withdrawal requests requiring admin approval",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "amount": {"type": "Number", "required": true},
        "status": {"type": "String", "enum": ["pending", "approved", "rejected"], "default": "pending"},
        "txId": {"type": "String"},
        "requestedAt": {"type": "Date", "default": "Date.now"},
        "processedAt": {"type": "Date"},
        "reason": {"type": "String", "description": "Rejection reason if applicable"}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User"}
      },
      "indexes": ["user", "status", "requestedAt (descending)"],
      "example": {
        "_id": "507f1f77bcf86cd799439081",
        "user": "507f1f77bcf86cd799439011",
        "amount": 100,
        "status": "approved",
        "txId": "WD-2024-001234",
        "requestedAt": "2024-10-05T10:00:00.000Z",
        "processedAt": "2024-10-05T14:30:00.000Z"
      }
    },
    "Notification": {
      "modelName": "Notification",
      "collectionName": "notifications",
      "description": "In-app notifications for users with categorization, priority, and action tracking",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "title": {"type": "String", "required": true, "maxlength": 100},
        "message": {"type": "String", "required": true, "maxlength": 500},
        "type": {"type": "String", "enum": ["info", "warning", "success", "error", "referral", "depletion", "goal", "system"], "required": true},
        "category": {"type": "String", "enum": ["referral_bonus", "goal_progress", "withdrawal", "system", "general"], "required": true},
        "priority": {"type": "String", "enum": ["low", "medium", "high", "urgent"], "default": "medium"},
        "isRead": {"type": "Boolean", "default": false},
        "isArchived": {"type": "Boolean", "default": false},
        "actionRequired": {"type": "Boolean", "default": false},
        "actionUrl": {"type": "String", "maxlength": 200},
        "actionText": {"type": "String", "maxlength": 50},
        "metadata": {"type": "Mixed", "default": {}, "description": "Additional notification data"},
        "expiresAt": {"type": "Date", "description": "Auto-delete after this date"},
        "createdAt": {"type": "Date", "default": "Date.now"},
        "readAt": {"type": "Date"}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User"}
      },
      "indexes": [
        "user, isRead, createdAt (descending)",
        "user, category, createdAt (descending)",
        "user, type, createdAt (descending)",
        "user, actionRequired, createdAt (descending)",
        "expiresAt (TTL index)"
      ],
      "example": {
        "_id": "507f1f77bcf86cd799439091",
        "user": "507f1f77bcf86cd799439011",
        "title": "Referral Bonus Earned!",
        "message": "You earned $50 from your Level 1 referral",
        "type": "referral",
        "category": "referral_bonus",
        "priority": "high",
        "isRead": false,
        "actionRequired": false,
        "metadata": {
          "bonusAmount": 50,
          "referralLevel": 1
        },
        "createdAt": "2024-10-10T09:00:00.000Z"
      }
    },
    "WeeklyDeclaration": {
      "modelName": "WeeklyDeclaration",
      "collectionName": "weeklydeclarations",
      "description": "Admin weekly profit declarations for distribution to eligible goals/stakes",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "weekNumber": {"type": "Number", "required": true, "min": 1, "max": 53},
        "year": {"type": "Number", "required": true, "min": 2024},
        "weekStartDate": {"type": "Date", "required": true, "description": "Monday 00:00 Baker Island Time"},
        "weekEndDate": {"type": "Date", "required": true, "description": "Sunday 23:59 Baker Island Time"},
        "declaredAmount": {"type": "Number", "required": true, "min": 0},
        "declaredBy": {"type": "ObjectId", "ref": "User", "required": true},
        "approvedBy": {"type": "ObjectId", "ref": "User"},
        "status": {"type": "String", "enum": ["pending", "approved", "distributed", "rejected"], "default": "pending"},
        "eligibleGoalsCount": {"type": "Number", "default": 0},
        "totalDistributed": {"type": "Number", "default": 0},
        "distributionDate": {"type": "Date"},
        "bakerIslandTime": {"type": "Date", "required": true},
        "notes": {"type": "String", "maxlength": 500},
        "auditTrail": {
          "type": "Object",
          "fields": {
            "declaredAt": {"type": "Date", "default": "Date.now"},
            "approvedAt": "Date",
            "distributedAt": "Date",
            "rejectedAt": "Date",
            "rejectionReason": "String"
          }
        },
        "createdAt": {"type": "Date", "default": "Date.now"},
        "updatedAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "declaredBy": {"type": "many-to-one", "model": "User"},
        "approvedBy": {"type": "many-to-one", "model": "User"}
      },
      "virtuals": {
        "weekIdentifier": {"type": "String", "description": "Format: YYYY-Wnn"},
        "distributionRate": {"type": "Number", "description": "Amount per eligible goal"},
        "isApproved": {"type": "Boolean"}
      },
      "hooks": {
        "pre-save": ["Update audit trail timestamps based on status changes"]
      },
      "indexes": [
        "year, weekNumber (unique)",
        "status",
        "declaredBy",
        "weekStartDate, weekEndDate",
        "bakerIslandTime"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390a1",
        "weekNumber": 40,
        "year": 2024,
        "weekStartDate": "2024-09-30T00:00:00.000Z",
        "weekEndDate": "2024-10-06T23:59:59.000Z",
        "declaredAmount": 10000,
        "declaredBy": "507f1f77bcf86cd799439012",
        "status": "approved",
        "eligibleGoalsCount": 250,
        "totalDistributed": 10000,
        "distributionDate": "2024-10-07T00:00:00.000Z",
        "bakerIslandTime": "2024-10-07T12:00:00.000Z",
        "auditTrail": {
          "declaredAt": "2024-10-07T10:00:00.000Z",
          "approvedAt": "2024-10-07T11:00:00.000Z",
          "distributedAt": "2024-10-07T12:00:00.000Z"
        }
      }
    },
    "ReferralBonus": {
      "modelName": "ReferralBonus",
      "collectionName": "referralbonuses",
      "description": "Referral bonuses earned from downline stakes. 5-level system: 5%, 2%, 1.5%, 1%, 0.5%",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "referredUser": {"type": "ObjectId", "ref": "User", "required": true},
        "amount": {"type": "Number", "required": true},
        "level": {"type": "Number", "required": true, "description": "1-5 (Level 1: 5%, Level 5: 0.5%)"},
        "createdAt": {"type": "Date", "default": "Date.now"},
        "stakeActivatedByDeadline": {"type": "Boolean", "default": false},
        "depletionStartedAt": {"type": "Date"},
        "depletedPercent": {"type": "Number", "default": 0, "min": 0, "max": 100},
        "fullyDepleted": {"type": "Boolean", "default": false}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User", "description": "User who earned the bonus"},
        "referredUser": {"type": "many-to-one", "model": "User", "description": "User who was referred"}
      },
      "indexes": ["user", "referredUser", "level", "createdAt (descending)"],
      "notes": [
        "5-Level Referral System:",
        "Level 1: 5% of downline stake",
        "Level 2: 2% of downline stake",
        "Level 3: 1.5% of downline stake",
        "Level 4: 1% of downline stake",
        "Level 5: 0.5% of downline stake",
        "Bonuses go to Earning Wallet (can stake + withdraw)"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390b1",
        "user": "507f1f77bcf86cd799439011",
        "referredUser": "507f1f77bcf86cd799439013",
        "amount": 50,
        "level": 1,
        "stakeActivatedByDeadline": true,
        "depletedPercent": 0,
        "fullyDepleted": false,
        "createdAt": "2024-09-15T10:00:00.000Z"
      }
    },
    "RegistrationBonus": {
      "modelName": "RegistrationBonus",
      "collectionName": "registrationbonuses",
      "description": "10% bonus on first stake within 7 days. Requires profile completion and social media follows.",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "userId": {"type": "ObjectId", "ref": "User", "required": true, "unique": true},
        "status": {
          "type": "String",
          "enum": ["pending", "requirements_met", "bonus_active", "expired", "completed", "cancelled"],
          "default": "pending"
        },
        "bonusPercentage": {"type": "Number", "required": true, "min": 0, "max": 100, "default": 10},
        "firstStakeAmount": {"type": "Number", "min": 0},
        "bonusAmount": {"type": "Number", "min": 0},
        "bonusStakeId": {"type": "ObjectId", "ref": "Stake"},
        "socialMediaVerifications": {
          "type": "Array<Object>",
          "itemFields": {
            "platform": {"type": "String", "enum": ["youtube", "facebook", "tiktok", "instagram", "telegram"], "required": true},
            "isVerified": {"type": "Boolean", "default": false},
            "verifiedAt": "Date",
            "accountHandle": "String",
            "verificationMethod": {"type": "String", "enum": ["api", "screenshot", "manual"], "default": "manual"}
          }
        },
        "profileCompletion": {
          "type": "Array<Object>",
          "itemFields": {
            "fieldName": {"type": "String", "required": true},
            "isCompleted": {"type": "Boolean", "default": false},
            "completedAt": "Date",
            "value": "String"
          }
        },
        "profileCompletionPercentage": {"type": "Number", "default": 0, "min": 0, "max": 100},
        "firstStakeCompleted": {"type": "Boolean", "default": false},
        "firstStakeId": {"type": "ObjectId", "ref": "Stake"},
        "registrationDate": {"type": "Date", "required": true},
        "deadline": {"type": "Date", "required": true, "description": "7 days from registration"},
        "requirementCompletedAt": {"type": "Date"},
        "bonusActivatedAt": {"type": "Date"},
        "bonusCompletedAt": {"type": "Date"},
        "fraudDetection": {
          "type": "Object",
          "fields": {
            "deviceFingerprint": "String",
            "ipAddress": "String",
            "geoLocation": "Object",
            "browserInfo": "Object",
            "suspicionScore": {"type": "Number", "min": 0, "max": 100},
            "flaggedReasons": "Array<String>",
            "similarAccounts": "Array<String>"
          }
        },
        "isApproved": {"type": "Boolean", "default": false},
        "approvedBy": {"type": "ObjectId", "ref": "User"},
        "approvedAt": {"type": "Date"},
        "rejectionReason": {"type": "String"},
        "settingsSnapshot": {
          "type": "Object",
          "description": "Settings at time of registration",
          "fields": {
            "bonusPercentage": "Number",
            "timeLimit": "Number",
            "maxBonusAmount": "Number",
            "minFirstStake": "Number",
            "requiredSocialPlatforms": "Array<String>",
            "requiredProfileFields": "Array<String>"
          }
        },
        "createdAt": {"type": "Date", "default": "Date.now"},
        "updatedAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "userId": {"type": "one-to-one", "model": "User"},
        "bonusStakeId": {"type": "one-to-one", "model": "Stake"},
        "firstStakeId": {"type": "one-to-one", "model": "Stake"}
      },
      "indexes": ["userId (unique)", "status", "registrationDate", "deadline"],
      "notes": [
        "Registration Bonus Requirements:",
        "1. Complete profile (full name, phone, address, DOB, gender)",
        "2. Follow all 5 social media platforms (YouTube, Facebook, TikTok, Instagram, Telegram)",
        "3. Create first stake within 7 days",
        "4. Bonus = 10% of first stake amount",
        "5. Bonus stake earns up to 100% (not 200% like regular stakes)",
        "6. All requirements must be met for approval"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390c1",
        "userId": "507f1f77bcf86cd799439011",
        "status": "bonus_active",
        "bonusPercentage": 10,
        "firstStakeAmount": 1000,
        "bonusAmount": 100,
        "bonusStakeId": "507f1f77bcf86cd799439052",
        "socialMediaVerifications": [
          {"platform": "facebook", "isVerified": true, "verifiedAt": "2024-01-16T10:00:00.000Z"},
          {"platform": "youtube", "isVerified": true, "verifiedAt": "2024-01-16T10:05:00.000Z"}
        ],
        "profileCompletionPercentage": 100,
        "firstStakeCompleted": true,
        "registrationDate": "2024-01-15T10:30:00.000Z",
        "deadline": "2024-01-22T10:30:00.000Z",
        "bonusActivatedAt": "2024-01-17T10:00:00.000Z",
        "isApproved": true
      }
    },
    "RankSystem": {
      "modelName": "RankSystem",
      "collectionName": "ranksystems",
      "description": "6-tier rank system configuration with requirements and pool distribution settings",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "defaultRank": {"type": "String", "default": "Stakeholder", "required": true},
        "ranks": {
          "type": "Array<Object>",
          "description": "6 ranks with progressive requirements",
          "itemFields": {
            "name": {"type": "String", "required": true},
            "personalStake": {"type": "Number", "required": true, "min": 0},
            "teamStake": {"type": "Number", "required": true, "min": 0},
            "directDownlines": {"type": "Number", "required": true, "min": 0},
            "lowerRankRequirement": {"type": "Number", "required": true, "min": 0},
            "lowerRankType": "String",
            "rankBonusPercent": {"type": "Number", "required": true, "min": 0, "max": 100}
          }
        },
        "poolDistribution": {
          "type": "Object",
          "fields": {
            "frequency": {"type": "String", "enum": ["daily", "weekly", "monthly"], "default": "weekly"},
            "equalDistributionRule": {"type": "Boolean", "default": true},
            "fallbackRule": {"type": "String", "enum": ["company_retains", "redistribute_equally", "hold_for_next_period"], "default": "company_retains"},
            "rankAndRedistributionShared": {"type": "Boolean", "default": true},
            "allocationField": "String"
          }
        },
        "redistributionPool": {
          "type": "Object",
          "fields": {
            "qualificationRule": {"type": "String", "enum": ["must_have_same_rank_downline", "any_qualifying_stake", "rank_based"]},
            "distributionLogic": {"type": "String", "enum": ["equal_split_among_qualified", "proportional_to_stake", "rank_weighted"]},
            "usesRankBonusPercent": {"type": "Boolean", "default": true}
          }
        },
        "verificationIcons": {
          "type": "Object",
          "fields": {
            "rankPoolQualified": {"type": "String", "default": "blue"},
            "redistributionPoolQualified": {"type": "String", "default": "green"},
            "requirementShortfallAfterAchievement": {"type": "String", "default": "red"}
          }
        },
        "isActive": {"type": "Boolean", "default": true},
        "createdAt": {"type": "Date", "default": "Date.now"},
        "updatedAt": {"type": "Date", "default": "Date.now"}
      },
      "methods": {
        "getRankByName": {"params": ["rankName: string"], "returns": "IRankRequirements | null"},
        "getNextRank": {"params": ["currentRankName: string"], "returns": "IRankRequirements | null"}
      },
      "hooks": {
        "pre-save": ["Update updatedAt timestamp"]
      },
      "notes": [
        "6 Ranks:",
        "1. Stakeholder (default)",
        "2. Associate Stakeholder",
        "3. Principal Strategist",
        "4. Elite Capitalist",
        "5. Wealth Architect",
        "6. Finance Titan",
        "Blue Tick = Rank Pool Qualified (Performance Pool)",
        "Green Tick = Redistribution Pool Qualified (Premium Pool)"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390d1",
        "defaultRank": "Stakeholder",
        "ranks": [
          {
            "name": "Stakeholder",
            "personalStake": 0,
            "teamStake": 0,
            "directDownlines": 0,
            "lowerRankRequirement": 0,
            "rankBonusPercent": 0
          },
          {
            "name": "Associate Stakeholder",
            "personalStake": 500,
            "teamStake": 2000,
            "directDownlines": 3,
            "lowerRankRequirement": 2,
            "lowerRankType": "Stakeholder",
            "rankBonusPercent": 5
          }
        ],
        "poolDistribution": {
          "frequency": "weekly",
          "equalDistributionRule": true,
          "fallbackRule": "company_retains"
        },
        "isActive": true
      }
    },
    "PoolDistribution": {
      "modelName": "PoolDistribution",
      "collectionName": "pooldistributions",
      "description": "Records of rank pool and redistribution pool distributions to qualified users",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "userId": {"type": "ObjectId", "ref": "User", "required": true},
        "rankName": {"type": "String", "required": true},
        "distributionType": {"type": "String", "enum": ["rank_pool", "redistribution_pool"], "required": true},
        "totalPoolAmount": {"type": "Number", "required": true, "min": 0},
        "userShare": {"type": "Number", "required": true, "min": 0, "max": 1, "description": "Percentage of pool (0-1)"},
        "bonusAmount": {"type": "Number", "required": true, "min": 0},
        "verificationIcon": {"type": "String", "enum": ["blue", "green", "red"], "required": true},
        "isQualified": {"type": "Boolean", "required": true},
        "qualificationReason": {"type": "String"},
        "distributionPeriod": {"type": "Date", "required": true},
        "distributionFrequency": {"type": "String", "enum": ["daily", "weekly", "monthly"], "default": "weekly"},
        "createdAt": {"type": "Date", "default": "Date.now"},
        "updatedAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "userId": {"type": "many-to-one", "model": "User"}
      },
      "hooks": {
        "pre-save": ["Update updatedAt timestamp"]
      },
      "indexes": [
        "userId, distributionPeriod (descending)",
        "distributionType, distributionPeriod (descending)",
        "rankName, isQualified"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390e1",
        "userId": "507f1f77bcf86cd799439011",
        "rankName": "Associate Stakeholder",
        "distributionType": "rank_pool",
        "totalPoolAmount": 5000,
        "userShare": 0.1,
        "bonusAmount": 500,
        "verificationIcon": "blue",
        "isQualified": true,
        "distributionPeriod": "2024-10-07T00:00:00.000Z",
        "distributionFrequency": "weekly"
      }
    },
    "FinancialLedger": {
      "modelName": "FinancialLedger",
      "collectionName": "financialledgers",
      "description": "Immutable double-entry bookkeeping ledger for all financial operations with complete audit trail",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "entryId": {"type": "String", "required": true, "unique": true, "description": "UUID for this ledger entry"},
        "transactionId": {"type": "String", "required": true, "description": "Reference to main transaction"},
        "batchId": {"type": "String", "description": "For batch operations"},
        "accountType": {"type": "String", "enum": ["asset", "liability", "equity", "revenue", "expense"], "required": true},
        "account": {"type": "String", "required": true, "description": "Account name"},
        "debitAmount": {"type": "Number", "required": true, "min": 0, "default": 0},
        "creditAmount": {"type": "Number", "required": true, "min": 0, "default": 0},
        "userId": {"type": "ObjectId", "ref": "User"},
        "operationType": {"type": "String", "enum": ["deposit", "withdrawal", "transfer", "stake", "bonus", "fee", "reconciliation"], "required": true},
        "description": {"type": "String", "required": true, "maxlength": 500},
        "isImmutable": {"type": "Boolean", "default": false, "description": "Once true, cannot be modified"},
        "parentEntryId": {"type": "String", "description": "For reversal entries"},
        "isReversal": {"type": "Boolean", "default": false},
        "expectedBalance": {"type": "Number", "min": 0},
        "actualBalance": {"type": "Number", "min": 0},
        "reconciled": {"type": "Boolean", "default": false},
        "reconciledAt": {"type": "Date"},
        "ipAddress": {"type": "String", "maxlength": 45},
        "userAgent": {"type": "String", "maxlength": 500},
        "sessionId": {"type": "String"},
        "nowPaymentsId": {"type": "String"},
        "createdBy": {"type": "ObjectId", "ref": "User", "required": true},
        "blockchainTxId": {"type": "String"},
        "verificationHash": {"type": "String", "required": true, "description": "Hash for integrity verification"},
        "createdAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "userId": {"type": "many-to-one", "model": "User"},
        "createdBy": {"type": "many-to-one", "model": "User"}
      },
      "hooks": {
        "pre-save": [
          "Prevent updates to immutable entries",
          "Validate double-entry rule (debit XOR credit)"
        ]
      },
      "indexes": [
        "entryId (unique)",
        "transactionId",
        "batchId",
        "accountType",
        "account",
        "userId",
        "operationType",
        "isImmutable",
        "parentEntryId",
        "isReversal",
        "reconciled",
        "sessionId",
        "nowPaymentsId",
        "blockchainTxId",
        "userId, operationType, createdAt (descending)",
        "account, createdAt (descending)",
        "transactionId, accountType",
        "reconciled, createdAt (descending)",
        "isImmutable, createdAt (descending)"
      ],
      "statics": {
        "createEntry": "Create new ledger entry with validation",
        "verifyEntry": "Verify entry integrity using hash",
        "generateVerificationHash": "Generate hash for entry data"
      },
      "notes": [
        "IMMUTABLE FINANCIAL LEDGER:",
        "- Double-entry bookkeeping for all operations",
        "- Complete audit trail",
        "- Balance reconciliation",
        "- Cannot modify after isImmutable=true",
        "- Verification hash for integrity"
      ],
      "example": {
        "_id": "507f1f77bcf86cd7994390f1",
        "entryId": "uuid-abc123",
        "transactionId": "TXN-2024-001234",
        "accountType": "asset",
        "account": "user_earning_wallet",
        "debitAmount": 0,
        "creditAmount": 50,
        "userId": "507f1f77bcf86cd799439011",
        "operationType": "bonus",
        "description": "Referral bonus Level 1",
        "isImmutable": true,
        "reconciled": true,
        "createdBy": "507f1f77bcf86cd799439012",
        "verificationHash": "sha256_hash_here",
        "createdAt": "2024-10-10T10:00:00.000Z"
      }
    },
    "SystemSettings": {
      "modelName": "SystemSetting",
      "collectionName": "systemsettings",
      "description": "Platform-wide configuration settings for features, limits, percentages, and behaviors",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "category": {"type": "String", "required": true, "description": "Setting category (referral, staking, withdrawal, etc.)"},
        "key": {"type": "String", "sparse": true, "description": "Specific setting key"},
        "settings": {"type": "Mixed", "default": {}, "description": "Settings object for category"},
        "value": {"type": "Mixed", "description": "Setting value"},
        "metadata": {"type": "Mixed", "default": {}, "description": "Additional metadata"},
        "lastUpdatedBy": {"type": "ObjectId", "ref": "User"},
        "lastUpdatedAt": {"type": "Date", "default": "Date.now"},
        "type": {"type": "String", "description": "Data type of setting"},
        "displayName": {"type": "String"},
        "description": {"type": "String"},
        "isEditable": {"type": "Boolean"},
        "minValue": {"type": "Number"},
        "maxValue": {"type": "Number"},
        "validOptions": {"type": "Array"},
        "updatedAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "lastUpdatedBy": {"type": "many-to-one", "model": "User"}
      },
      "indexes": ["category", "key"],
      "notes": [
        "Dynamic settings for:",
        "- Referral percentages (5 levels)",
        "- Registration bonus (percentage, time limit)",
        "- Minimum stake amount",
        "- Withdrawal limits",
        "- Feature toggles",
        "- Pool distribution percentages"
      ],
      "example": {
        "_id": "507f1f77bcf86cd799439101",
        "category": "referral",
        "key": "referral_level_1_percentage",
        "value": 5,
        "type": "number",
        "displayName": "Level 1 Referral %",
        "description": "Percentage for Level 1 referral bonus",
        "isEditable": true,
        "minValue": 0,
        "maxValue": 100,
        "lastUpdatedAt": "2024-10-01T00:00:00.000Z"
      }
    },
    "KYCSubmission": {
      "modelName": "KYCSubmission",
      "collectionName": "kycsubmissions",
      "description": "Know Your Customer document submissions for identity verification",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "fullName": {"type": "String", "required": true},
        "documentType": {"type": "String", "required": true},
        "documentNumber": {"type": "String", "required": true},
        "documentImageUrl": {"type": "String", "required": true},
        "selfieImageUrl": {"type": "String", "required": true},
        "status": {"type": "String", "enum": ["pending", "approved", "rejected"], "default": "pending"},
        "submittedAt": {"type": "Date", "default": "Date.now"},
        "reviewedAt": {"type": "Date"}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User"}
      },
      "indexes": ["user", "status", "submittedAt (descending)"],
      "example": {
        "_id": "507f1f77bcf86cd799439111",
        "user": "507f1f77bcf86cd799439011",
        "fullName": "John Doe",
        "documentType": "passport",
        "documentNumber": "AB123456",
        "documentImageUrl": "https://storage.example.com/kyc/passport_123.jpg",
        "selfieImageUrl": "https://storage.example.com/kyc/selfie_123.jpg",
        "status": "approved",
        "submittedAt": "2024-01-20T10:00:00.000Z",
        "reviewedAt": "2024-01-20T14:30:00.000Z"
      }
    },
    "ActivityFeed": {
      "modelName": "ActivityFeed",
      "collectionName": "activityfeeds",
      "description": "User activity feed with real and simulated actions for engagement",
      "fields": {
        "_id": {"type": "ObjectId", "required": true},
        "user": {"type": "ObjectId", "ref": "User", "required": true},
        "type": {"type": "String", "enum": ["user_action", "system_event", "simulated_action", "milestone", "achievement"], "required": true},
        "category": {"type": "String", "enum": ["staking", "withdrawal", "referral", "goal", "system", "social", "security"], "required": true},
        "action": {"type": "String", "required": true, "maxlength": 100},
        "description": {"type": "String", "required": true, "maxlength": 500},
        "entityType": {"type": "String", "enum": ["stake", "transaction", "goal", "user", "bonus", "notification"]},
        "entityId": {"type": "ObjectId"},
        "metadata": {"type": "Mixed", "description": "Additional action data"},
        "visibility": {
          "type": "Object",
          "fields": {
            "public": {"type": "Boolean", "default": false},
            "showToUser": {"type": "Boolean", "default": true},
            "showInFeed": {"type": "Boolean", "default": true},
            "showInNotifications": {"type": "Boolean", "default": false}
          }
        },
        "priority": {"type": "String", "enum": ["low", "medium", "high", "urgent"], "default": "medium"},
        "isSimulated": {"type": "Boolean", "default": false},
        "simulationSettings": {
          "type": "Object",
          "fields": {
            "generatedBy": "String",
            "template": "String",
            "randomSeed": "Number"
          }
        },
        "analytics": {
          "type": "Object",
          "fields": {
            "views": {"type": "Number", "default": 0},
            "clicks": {"type": "Number", "default": 0},
            "interactions": {"type": "Number", "default": 0},
            "lastViewed": "Date"
          }
        },
        "formatting": {
          "type": "Object",
          "fields": {
            "icon": "String",
            "color": "String",
            "badge": "String",
            "highlight": {"type": "Boolean", "default": false}
          }
        },
        "grouping": {
          "type": "Object",
          "fields": {
            "sessionId": "String",
            "groupKey": "String",
            "canGroup": {"type": "Boolean", "default": true}
          }
        },
        "isRead": {"type": "Boolean", "default": false},
        "expiresAt": {"type": "Date", "description": "Auto-delete after this date"},
        "createdAt": {"type": "Date", "default": "Date.now"}
      },
      "relationships": {
        "user": {"type": "many-to-one", "model": "User"}
      },
      "indexes": [
        "user, isRead, createdAt (descending)",
        "user, category, createdAt (descending)",
        "user, type, createdAt (descending)",
        "isSimulated, createdAt (descending)",
        "expiresAt (TTL index)"
      ],
      "methods": {
        "getTimeAgo": "Get human-readable time since action",
        "getDefaultIcon": "Get default icon for action type",
        "getDefaultColor": "Get default color for action type"
      },
      "example": {
        "_id": "507f1f77bcf86cd799439121",
        "user": "507f1f77bcf86cd799439011",
        "type": "user_action",
        "category": "staking",
        "action": "stake_created",
        "description": "Created new stake of $1000 for vacation goal",
        "entityType": "stake",
        "entityId": "507f1f77bcf86cd799439051",
        "metadata": {
          "amount": 1000,
          "goalTitle": "Vacation to Bali"
        },
        "visibility": {
          "showToUser": true,
          "showInFeed": true
        },
        "priority": "medium",
        "isSimulated": false,
        "isRead": false,
        "createdAt": "2024-09-01T00:00:00.000Z"
      }
    }
  }
}
