{
  "version": "1.0.0",
  "generated": "2025-10-12",
  "description": "Comprehensive error handling and response formats for Novunt API",
  "standardErrorFormat": {
    "description": "All errors follow a consistent structure",
    "format": {
      "success": false,
      "message": "Human-readable error message",
      "error": {
        "code": "ERROR_CODE",
        "message": "Detailed error message",
        "details": "Optional additional information"
      }
    },
    "example": {
      "success": false,
      "message": "Insufficient funds",
      "error": {
        "code": "INSUFFICIENT_FUNDS",
        "message": "Insufficient balance in earningWallet",
        "details": "Required: 100 USDT, Available: 50 USDT"
      }
    }
  },
  "standardSuccessFormat": {
    "description": "All successful responses follow a consistent structure",
    "format": {
      "success": true,
      "message": "Human-readable success message",
      "data": "Response payload (optional)"
    },
    "example": {
      "success": true,
      "message": "Stake created successfully",
      "data": {
        "stakeId": "stake_id",
        "amount": 1000,
        "status": "active"
      }
    }
  },
  "httpStatusCodes": {
    "2xx": {
      "200": "OK - Request succeeded",
      "201": "Created - Resource created successfully",
      "204": "No Content - Request succeeded but no content to return"
    },
    "4xx": {
      "400": "Bad Request - Invalid request parameters or validation failed",
      "401": "Unauthorized - Authentication required or token invalid",
      "403": "Forbidden - Authenticated but insufficient permissions or MFA required",
      "404": "Not Found - Requested resource does not exist",
      "409": "Conflict - Resource already exists or concurrent operation detected",
      "429": "Too Many Requests - Rate limit exceeded"
    },
    "5xx": {
      "500": "Internal Server Error - Server-side error occurred",
      "503": "Service Unavailable - Service temporarily unavailable"
    }
  },
  "authenticationErrors": {
    "category": "Authentication & Authorization Errors",
    "statusCode": 401,
    "errors": [
      {
        "code": "AUTH_REQUIRED",
        "message": "Authentication required",
        "description": "No authentication token provided",
        "frontendAction": "Redirect to login page",
        "example": {
          "success": false,
          "message": "Authentication required",
          "error": {
            "code": "AUTH_REQUIRED",
            "message": "Valid authentication token is required"
          }
        }
      },
      {
        "code": "INVALID_TOKEN",
        "message": "Invalid authentication token",
        "description": "Token is malformed, expired, or revoked",
        "frontendAction": "Clear session, redirect to login",
        "example": {
          "success": false,
          "message": "Invalid authentication token",
          "error": {
            "code": "INVALID_TOKEN",
            "message": "The provided authentication token is invalid or expired"
          }
        }
      },
      {
        "code": "TOKEN_EXPIRED",
        "message": "Token expired",
        "description": "Authentication token has expired",
        "frontendAction": "Attempt refresh token flow, then redirect to login if fails",
        "example": {
          "success": false,
          "message": "Token expired",
          "error": {
            "code": "TOKEN_EXPIRED",
            "message": "Your session has expired. Please login again."
          }
        }
      },
      {
        "code": "INVALID_CREDENTIALS",
        "message": "Invalid credentials",
        "description": "Email/username or password is incorrect",
        "frontendAction": "Show error message, allow retry",
        "example": {
          "success": false,
          "message": "Invalid credentials",
          "error": {
            "code": "INVALID_CREDENTIALS",
            "message": "Email/username or password is incorrect"
          }
        }
      },
      {
        "code": "USER_NOT_FOUND",
        "message": "User not found",
        "statusCode": 404,
        "description": "User associated with token does not exist",
        "frontendAction": "Clear session, redirect to login",
        "example": {
          "success": false,
          "message": "User not found",
          "error": {
            "code": "USER_NOT_FOUND",
            "message": "The user associated with this token does not exist"
          }
        }
      },
      {
        "code": "ACCOUNT_INACTIVE",
        "message": "Account deactivated",
        "statusCode": 403,
        "description": "User account has been deactivated",
        "frontendAction": "Show contact support message, clear session",
        "example": {
          "success": false,
          "message": "Account deactivated",
          "error": {
            "code": "ACCOUNT_INACTIVE",
            "message": "This account has been deactivated. Please contact support."
          }
        }
      },
      {
        "code": "MFA_REQUIRED",
        "message": "MFA required",
        "statusCode": 403,
        "description": "Multi-factor authentication is required",
        "frontendAction": "Redirect to 2FA verification page",
        "example": {
          "success": false,
          "message": "MFA required",
          "error": {
            "code": "MFA_REQUIRED",
            "message": "Multi-factor authentication is required to access this resource"
          }
        }
      },
      {
        "code": "MFA_VERIFICATION_FAILED",
        "message": "MFA verification failed",
        "description": "2FA code is invalid or expired",
        "frontendAction": "Show error, allow retry",
        "example": {
          "success": false,
          "message": "MFA verification failed",
          "error": {
            "code": "MFA_VERIFICATION_FAILED",
            "message": "The 2FA code you entered is invalid or expired"
          }
        }
      }
    ]
  },
  "authorizationErrors": {
    "category": "Permission & Access Errors",
    "statusCode": 403,
    "errors": [
      {
        "code": "INSUFFICIENT_PERMISSIONS",
        "message": "Access forbidden",
        "description": "User does not have required role or permissions",
        "frontendAction": "Show access denied message, redirect to dashboard",
        "example": {
          "success": false,
          "message": "Access forbidden",
          "error": {
            "code": "INSUFFICIENT_PERMISSIONS",
            "message": "You do not have permission to access this resource"
          }
        }
      },
      {
        "code": "UNAUTHORIZED",
        "message": "Unauthorized access",
        "description": "Action requires specific permissions user doesn't have",
        "frontendAction": "Show unauthorized message",
        "example": {
          "success": false,
          "message": "Unauthorized",
          "error": {
            "code": "UNAUTHORIZED",
            "message": "You are not authorized to perform this action"
          }
        }
      }
    ]
  },
  "validationErrors": {
    "category": "Input Validation Errors",
    "statusCode": 400,
    "errors": [
      {
        "code": "MISSING_FIELDS",
        "message": "Missing required fields",
        "description": "One or more required fields are missing",
        "frontendAction": "Highlight missing fields, prevent submission",
        "example": {
          "success": false,
          "message": "Missing required fields",
          "error": {
            "code": "MISSING_FIELDS",
            "message": "Email, password, and username are required",
            "details": {
              "missingFields": ["email", "password", "username"]
            }
          }
        }
      },
      {
        "code": "INVALID_REQUEST",
        "message": "Invalid request",
        "description": "Request body or parameters are malformed",
        "frontendAction": "Show error message, check input validation",
        "example": {
          "success": false,
          "message": "Invalid request",
          "error": {
            "code": "INVALID_REQUEST",
            "message": "Request body contains invalid data"
          }
        }
      },
      {
        "code": "INVALID_EMAIL",
        "message": "Invalid email format",
        "description": "Email address is not in valid format",
        "frontendAction": "Show inline error on email field",
        "example": {
          "success": false,
          "message": "Invalid email format",
          "error": {
            "code": "INVALID_EMAIL",
            "message": "Please provide a valid email address"
          }
        }
      },
      {
        "code": "INVALID_PASSWORD",
        "message": "Invalid password",
        "description": "Password does not meet requirements",
        "frontendAction": "Show password requirements, highlight issues",
        "example": {
          "success": false,
          "message": "Invalid password",
          "error": {
            "code": "INVALID_PASSWORD",
            "message": "Password must be at least 8 characters with uppercase, lowercase, number, and special character",
            "details": {
              "requirements": {
                "minLength": 8,
                "requireUppercase": true,
                "requireLowercase": true,
                "requireNumber": true,
                "requireSpecial": true
              }
            }
          }
        }
      },
      {
        "code": "PASSWORD_MISMATCH",
        "message": "Passwords do not match",
        "description": "Password and confirmation password don't match",
        "frontendAction": "Highlight both password fields",
        "example": {
          "success": false,
          "message": "Passwords do not match",
          "error": {
            "code": "PASSWORD_MISMATCH",
            "message": "Password and confirmation password must match"
          }
        }
      },
      {
        "code": "MINIMUM_AMOUNT_NOT_MET",
        "message": "Minimum amount not met",
        "description": "Amount is below minimum threshold",
        "frontendAction": "Show minimum amount requirement",
        "examples": [
          {
            "scenario": "Deposit too small",
            "response": {
              "success": false,
              "message": "Minimum deposit is 10 USDT",
              "error": {
                "code": "MINIMUM_AMOUNT_NOT_MET",
                "message": "Minimum deposit amount is 10 USDT",
                "details": {
                  "provided": 5,
                  "minimum": 10,
                  "currency": "USDT"
                }
              }
            }
          },
          {
            "scenario": "Stake too small",
            "response": {
              "success": false,
              "message": "Minimum stake is 50 USDT",
              "error": {
                "code": "MINIMUM_AMOUNT_NOT_MET",
                "message": "Minimum stake amount is 50 USDT"
              }
            }
          }
        ]
      },
      {
        "code": "MAXIMUM_AMOUNT_EXCEEDED",
        "message": "Maximum amount exceeded",
        "description": "Amount exceeds maximum threshold",
        "frontendAction": "Show maximum amount limit",
        "example": {
          "success": false,
          "message": "Maximum transfer amount exceeded",
          "error": {
            "code": "MAXIMUM_AMOUNT_EXCEEDED",
            "message": "Maximum transfer amount is 10000 USDT",
            "details": {
              "provided": 15000,
              "maximum": 10000,
              "currency": "USDT"
            }
          }
        }
      }
    ]
  },
  "financialErrors": {
    "category": "Financial Operation Errors",
    "errors": [
      {
        "code": "INSUFFICIENT_FUNDS",
        "message": "Insufficient funds",
        "statusCode": 400,
        "description": "User doesn't have enough balance for operation",
        "frontendAction": "Show available balance, suggest deposit",
        "examples": [
          {
            "scenario": "Withdrawal insufficient funds",
            "response": {
              "success": false,
              "message": "Insufficient funds in earningWallet",
              "error": {
                "code": "INSUFFICIENT_FUNDS",
                "message": "Insufficient balance in earningWallet",
                "details": {
                  "required": 100,
                  "available": 50,
                  "currency": "USDT",
                  "wallet": "earningWallet"
                }
              }
            }
          },
          {
            "scenario": "Stake insufficient funds",
            "response": {
              "success": false,
              "message": "Insufficient funds in fundedWallet",
              "error": {
                "code": "INSUFFICIENT_FUNDS",
                "message": "Insufficient balance in fundedWallet to create stake",
                "details": {
                  "required": 1000,
                  "available": 500,
                  "wallet": "fundedWallet"
                }
              }
            }
          }
        ]
      },
      {
        "code": "WITHDRAWAL_LIMIT_EXCEEDED",
        "message": "Withdrawal limit exceeded",
        "statusCode": 429,
        "description": "User has exceeded daily withdrawal limit",
        "frontendAction": "Show daily limit information, countdown to reset",
        "example": {
          "success": false,
          "message": "Daily withdrawal limit exceeded",
          "error": {
            "code": "WITHDRAWAL_LIMIT_EXCEEDED",
            "message": "You have reached the maximum 2 withdrawals per day (UTC timezone)",
            "details": {
              "dailyLimit": 2,
              "withdrawalsToday": 2,
              "resetsAt": "2024-10-13T00:00:00.000Z"
            }
          }
        }
      },
      {
        "code": "PENDING_TRANSACTION_EXISTS",
        "message": "Pending transaction exists",
        "statusCode": 409,
        "description": "User has another pending transaction",
        "frontendAction": "Show pending transaction details, prevent new transaction",
        "example": {
          "success": false,
          "message": "You have a pending withdrawal",
          "error": {
            "code": "PENDING_TRANSACTION_EXISTS",
            "message": "Please wait for your pending withdrawal to be processed before initiating a new one",
            "details": {
              "pendingTransactionId": "txn_123",
              "type": "withdrawal",
              "amount": 100,
              "status": "pending_admin_approval"
            }
          }
        }
      },
      {
        "code": "DOUBLE_SPENDING_DETECTED",
        "message": "Double spending attempt detected",
        "statusCode": 409,
        "description": "Concurrent transaction detected for same funds",
        "frontendAction": "Refresh wallet balance, prevent concurrent transactions",
        "example": {
          "success": false,
          "message": "Transaction already in progress",
          "error": {
            "code": "DOUBLE_SPENDING_DETECTED",
            "message": "Another transaction is already processing with these funds. Please wait.",
            "details": {
              "lockId": "lock_123",
              "operation": "withdrawal"
            }
          }
        }
      },
      {
        "code": "TRANSFER_TO_SELF",
        "message": "Cannot transfer to yourself",
        "statusCode": 400,
        "description": "User attempted P2P transfer to own account",
        "frontendAction": "Show error, prevent self-transfer in UI",
        "example": {
          "success": false,
          "message": "You cannot transfer to yourself",
          "error": {
            "code": "TRANSFER_TO_SELF",
            "message": "P2P transfers to your own account are not allowed"
          }
        }
      },
      {
        "code": "RECIPIENT_NOT_FOUND",
        "message": "Recipient not found",
        "statusCode": 404,
        "description": "Transfer recipient does not exist",
        "frontendAction": "Show error, validate recipient ID",
        "example": {
          "success": false,
          "message": "Sender or recipient not found",
          "error": {
            "code": "RECIPIENT_NOT_FOUND",
            "message": "The recipient user does not exist"
          }
        }
      },
      {
        "code": "TRANSFER_DISABLED",
        "message": "P2P transfers are temporarily disabled",
        "statusCode": 400,
        "description": "P2P transfer feature is temporarily disabled",
        "frontendAction": "Disable transfer UI, show maintenance message",
        "example": {
          "success": false,
          "message": "P2P transfers are temporarily disabled",
          "error": {
            "code": "TRANSFER_DISABLED",
            "message": "P2P transfers are temporarily disabled. Please try again later."
          }
        }
      },
      {
        "code": "WITHDRAWAL_FAILED",
        "message": "Withdrawal processing failed",
        "statusCode": 500,
        "description": "NowPayments or external service failed to process withdrawal",
        "frontendAction": "Show error, suggest contacting support",
        "example": {
          "success": false,
          "message": "NowPayments withdrawal failed",
          "error": {
            "code": "WITHDRAWAL_FAILED",
            "message": "Failed to process withdrawal through payment provider",
            "details": "Payment provider returned error. Please contact support if funds were deducted."
          }
        }
      }
    ]
  },
  "resourceErrors": {
    "category": "Resource Not Found Errors",
    "statusCode": 404,
    "errors": [
      {
        "code": "TRANSACTION_NOT_FOUND",
        "message": "Transaction not found",
        "description": "Requested transaction does not exist",
        "frontendAction": "Show not found message, redirect to history",
        "example": {
          "success": false,
          "message": "Transaction not found",
          "error": {
            "code": "TRANSACTION_NOT_FOUND",
            "message": "The requested transaction does not exist or you don't have access to it"
          }
        }
      },
      {
        "code": "STAKE_NOT_FOUND",
        "message": "Stake not found",
        "description": "Requested stake does not exist",
        "frontendAction": "Show not found message",
        "example": {
          "success": false,
          "message": "Stake not found",
          "error": {
            "code": "STAKE_NOT_FOUND",
            "message": "The requested stake does not exist"
          }
        }
      },
      {
        "code": "REFERRAL_CODE_INVALID",
        "message": "Invalid referral code",
        "description": "Referral code does not exist",
        "frontendAction": "Show inline error, make referral code optional",
        "example": {
          "success": false,
          "message": "Referral code not found",
          "error": {
            "code": "REFERRAL_CODE_INVALID",
            "message": "The referral code you entered is invalid"
          }
        }
      }
    ]
  },
  "conflictErrors": {
    "category": "Conflict Errors",
    "statusCode": 409,
    "errors": [
      {
        "code": "USER_EXISTS",
        "message": "User already exists",
        "description": "User with this email or username already exists",
        "frontendAction": "Show error, suggest login or password recovery",
        "example": {
          "success": false,
          "message": "User already exists",
          "error": {
            "code": "USER_EXISTS",
            "message": "An account with this email or username already exists",
            "details": {
              "conflictingField": "email"
            }
          }
        }
      },
      {
        "code": "EMAIL_TAKEN",
        "message": "Email already taken",
        "description": "Email address is already registered",
        "frontendAction": "Show error on email field, suggest login",
        "example": {
          "success": false,
          "message": "Email already taken",
          "error": {
            "code": "EMAIL_TAKEN",
            "message": "This email address is already registered"
          }
        }
      },
      {
        "code": "USERNAME_TAKEN",
        "message": "Username already taken",
        "description": "Username is already registered",
        "frontendAction": "Show error on username field, suggest alternatives",
        "example": {
          "success": false,
          "message": "Username already taken",
          "error": {
            "code": "USERNAME_TAKEN",
            "message": "This username is already taken. Please choose another."
          }
        }
      },
      {
        "code": "TRANSACTION_ALREADY_PROCESSED",
        "message": "Transaction already processed",
        "description": "Transaction has already been processed",
        "frontendAction": "Refresh transaction status, show current status",
        "example": {
          "success": false,
          "message": "Transaction already processed",
          "error": {
            "code": "TRANSACTION_ALREADY_PROCESSED",
            "message": "This transaction has already been processed",
            "details": {
              "status": "confirmed",
              "processedAt": "2024-10-12T10:30:00.000Z"
            }
          }
        }
      },
      {
        "code": "WEEKLY_DECLARATION_EXISTS",
        "message": "Profit already declared for this week",
        "description": "Weekly profit has already been declared",
        "frontendAction": "Show existing declaration, prevent duplicate",
        "example": {
          "success": false,
          "message": "Profit already declared for this week",
          "error": {
            "code": "WEEKLY_DECLARATION_EXISTS",
            "message": "Weekly profit has already been declared for week 41, 2024",
            "details": {
              "weekNumber": 41,
              "year": 2024,
              "existingDeclarationId": "decl_123"
            }
          }
        }
      }
    ]
  },
  "rateLimitErrors": {
    "category": "Rate Limit Errors",
    "statusCode": 429,
    "errors": [
      {
        "code": "TOO_MANY_REQUESTS",
        "message": "Too many requests",
        "description": "Rate limit exceeded for this endpoint",
        "frontendAction": "Show cooldown message, disable submit button temporarily",
        "examples": [
          {
            "scenario": "General rate limit",
            "response": {
              "success": false,
              "message": "Too many requests",
              "error": {
                "code": "TOO_MANY_REQUESTS",
                "message": "You have exceeded the rate limit. Please try again later.",
                "details": {
                  "retryAfter": 60,
                  "limit": 100,
                  "window": "15 minutes"
                }
              }
            }
          },
          {
            "scenario": "Financial operation rate limit",
            "response": {
              "success": false,
              "message": "Too many financial operations",
              "error": {
                "code": "TOO_MANY_REQUESTS",
                "message": "You have exceeded the rate limit for financial operations. Please wait before trying again.",
                "details": {
                  "retryAfter": 300,
                  "limit": 10,
                  "window": "1 hour"
                }
              }
            }
          },
          {
            "scenario": "Email verification resend limit",
            "response": {
              "success": false,
              "message": "Please wait a minute before trying again",
              "error": {
                "code": "TOO_MANY_REQUESTS",
                "message": "Email verification code was sent recently. Please wait 1 minute before requesting again.",
                "details": {
                  "retryAfter": 60
                }
              }
            }
          }
        ]
      }
    ]
  },
  "serverErrors": {
    "category": "Server & System Errors",
    "statusCode": 500,
    "errors": [
      {
        "code": "INTERNAL_SERVER_ERROR",
        "message": "Internal server error",
        "description": "Unexpected server error occurred",
        "frontendAction": "Show generic error message, suggest retry or contact support",
        "example": {
          "success": false,
          "message": "Internal server error",
          "error": {
            "code": "INTERNAL_SERVER_ERROR",
            "message": "An unexpected error occurred. Please try again later."
          }
        }
      },
      {
        "code": "DATABASE_ERROR",
        "message": "Database error",
        "description": "Database operation failed",
        "frontendAction": "Show error message, suggest retry",
        "example": {
          "success": false,
          "message": "Database error",
          "error": {
            "code": "DATABASE_ERROR",
            "message": "Failed to process your request due to a database error"
          }
        }
      },
      {
        "code": "EMAIL_SENDING_FAILED",
        "message": "Email sending failed",
        "description": "Failed to send email notification",
        "frontendAction": "Operation may have succeeded, but email failed. Show warning.",
        "example": {
          "success": false,
          "message": "Failed to send verification email",
          "error": {
            "code": "EMAIL_SENDING_FAILED",
            "message": "Your account was created but we couldn't send the verification email. Please try resending from your profile."
          }
        }
      },
      {
        "code": "PAYMENT_PROVIDER_ERROR",
        "message": "Payment provider error",
        "description": "NowPayments or external payment service error",
        "frontendAction": "Show error, suggest retry or contact support",
        "example": {
          "success": false,
          "message": "Failed to initiate deposit",
          "error": {
            "code": "PAYMENT_PROVIDER_ERROR",
            "message": "Unable to connect to payment provider. Please try again in a few minutes."
          }
        }
      }
    ]
  },
  "webhookErrors": {
    "category": "Webhook Security Errors",
    "description": "Internal errors for webhook validation (not directly exposed to frontend)",
    "errors": [
      {
        "code": "INVALID_WEBHOOK_SIGNATURE",
        "message": "Invalid webhook signature",
        "statusCode": 401,
        "description": "Webhook signature validation failed",
        "example": {
          "success": false,
          "message": "Invalid webhook signature",
          "error": {
            "code": "INVALID_WEBHOOK_SIGNATURE",
            "message": "Webhook signature validation failed"
          }
        }
      },
      {
        "code": "WEBHOOK_REPLAY_DETECTED",
        "message": "Webhook replay detected",
        "statusCode": 409,
        "description": "Duplicate webhook detected",
        "example": {
          "success": false,
          "message": "Webhook already processed",
          "error": {
            "code": "WEBHOOK_REPLAY_DETECTED",
            "message": "This webhook has already been processed"
          }
        }
      }
    ]
  },
  "businessLogicErrors": {
    "category": "Business Logic Errors",
    "errors": [
      {
        "code": "REGISTRATION_BONUS_EXPIRED",
        "message": "Registration bonus expired",
        "statusCode": 400,
        "description": "7-day deadline passed for first stake",
        "frontendAction": "Show expiration message, hide bonus UI",
        "example": {
          "success": false,
          "message": "Registration bonus expired",
          "error": {
            "code": "REGISTRATION_BONUS_EXPIRED",
            "message": "Registration bonus deadline (7 days) has passed",
            "details": {
              "deadline": "2024-01-22T10:30:00.000Z",
              "expiredOn": "2024-01-22T10:30:00.000Z"
            }
          }
        }
      },
      {
        "code": "REGISTRATION_BONUS_REQUIREMENTS_NOT_MET",
        "message": "Registration bonus requirements not met",
        "statusCode": 400,
        "description": "Profile incomplete or social media not verified",
        "frontendAction": "Show requirements checklist, guide user to complete",
        "example": {
          "success": false,
          "message": "Registration bonus requirements not met",
          "error": {
            "code": "REGISTRATION_BONUS_REQUIREMENTS_NOT_MET",
            "message": "Please complete your profile and verify all social media accounts",
            "details": {
              "profileCompleted": false,
              "socialMediaVerified": false,
              "missingFields": ["phone", "address"],
              "unverifiedPlatforms": ["youtube", "facebook"]
            }
          }
        }
      },
      {
        "code": "RANK_REQUIREMENTS_NOT_MET",
        "message": "Rank requirements not met",
        "statusCode": 400,
        "description": "User doesn't meet requirements for rank",
        "frontendAction": "Show requirements breakdown, current vs needed",
        "example": {
          "success": false,
          "message": "Rank requirements not met",
          "error": {
            "code": "RANK_REQUIREMENTS_NOT_MET",
            "message": "You don't meet the requirements for Associate Stakeholder",
            "details": {
              "requiredStake": 10000,
              "currentStake": 5000,
              "requiredReferrals": 10,
              "currentReferrals": 3
            }
          }
        }
      },
      {
        "code": "STAKE_ALREADY_COMPLETED",
        "message": "Stake already completed",
        "statusCode": 400,
        "description": "Stake has reached 200% ROI target",
        "frontendAction": "Show completion status, disable stake operations",
        "example": {
          "success": false,
          "message": "Stake already completed",
          "error": {
            "code": "STAKE_ALREADY_COMPLETED",
            "message": "This stake has already reached its 200% ROI target",
            "details": {
              "stakeAmount": 1000,
              "totalReturned": 2000,
              "completedAt": "2024-10-12T00:00:00.000Z"
            }
          }
        }
      },
      {
        "code": "INVALID_WITHDRAWAL_SOURCE",
        "message": "Invalid withdrawal source",
        "statusCode": 400,
        "description": "Withdrawal can only be from earningWallet",
        "frontendAction": "Show wallet routing info, guide to earning wallet",
        "example": {
          "success": false,
          "message": "Withdrawals can only be made from earningWallet",
          "error": {
            "code": "INVALID_WITHDRAWAL_SOURCE",
            "message": "Withdrawals are only allowed from your earningWallet. Your fundedWallet balance can only be used for staking.",
            "details": {
              "earningWalletBalance": 500,
              "fundedWalletBalance": 1000
            }
          }
        }
      }
    ]
  },
  "frontendErrorHandling": {
    "generalPrinciples": [
      "Always check response.success first",
      "Display error.message to users (human-readable)",
      "Use error.code for conditional logic and UI behavior",
      "Parse error.details for additional context",
      "Log errors to monitoring service (Sentry, LogRocket, etc.)",
      "Provide actionable feedback (what to do next)",
      "Never expose technical details or stack traces to users"
    ],
    "errorHandlingPattern": {
      "description": "Check response.success first, then handle based on error.code",
      "steps": [
        "1. Check if response.success is false",
        "2. Extract error.code for conditional logic",
        "3. Display error.message to user",
        "4. Use error.details for additional context",
        "5. Take appropriate action based on error code",
        "6. Log errors to monitoring service"
      ],
      "commonActions": {
        "INSUFFICIENT_FUNDS": "Show balance, suggest deposit",
        "WITHDRAWAL_LIMIT_EXCEEDED": "Show countdown to reset time",
        "MFA_REQUIRED": "Redirect to 2FA page",
        "INVALID_TOKEN": "Clear session, redirect to login",
        "TOO_MANY_REQUESTS": "Disable button, show retry countdown",
        "AUTH_REQUIRED": "Redirect to login page"
      }
    },
    "responseTypeValidation": {
      "description": "Always validate response structure before accessing properties",
      "checkSuccess": "Verify response.success === false for errors",
      "checkErrorCode": "Verify response.error.code exists",
      "checkErrorDetails": "Safely access response.error.details with optional chaining",
      "typeGuards": "Use TypeScript type guards to ensure type safety"
    },
    "errorDisplayStrategies": {
      "toast": "For general errors and success messages (auto-dismiss)",
      "inline": "For form validation errors (next to field)",
      "modal": "For critical errors requiring user acknowledgment",
      "banner": "For system-wide issues (maintenance, outages)",
      "example": {
        "toast": "Used for: Transaction success, operation completed, non-blocking errors",
        "inline": "Used for: Invalid email, password too short, missing field",
        "modal": "Used for: Account locked, payment failed, session expired",
        "banner": "Used for: Scheduled maintenance, service degradation"
      }
    },
    "retryStrategies": {
      "immediateRetry": {
        "use": "Network errors, temporary failures",
        "maxRetries": 3,
        "example": "Retry failed API call up to 3 times with exponential backoff"
      },
      "userInitiatedRetry": {
        "use": "Business logic errors, validation errors",
        "example": "Show 'Try Again' button after error"
      },
      "automaticRetry": {
        "use": "Token refresh, session recovery",
        "example": "Automatically refresh token and retry original request"
      },
      "noRetry": {
        "use": "Authentication errors, authorization errors, validation errors",
        "example": "User must take action (login, fix input, contact support)"
      }
    },
    "errorLogging": {
      "logToConsole": "Development only",
      "logToMonitoring": "Production - log all errors with context",
      "logContext": [
        "User ID (if authenticated)",
        "Request URL and method",
        "Request body (sanitized - no passwords)",
        "Response status and error code",
        "Timestamp",
        "User agent and IP (privacy-compliant)",
        "Session ID or trace ID"
      ],
      "sentryIntegration": "Send errors to Sentry with errorCode, endpoint, method, and user context"
    }
  },
  "testingErrorHandling": {
    "description": "How to test error scenarios in development",
    "strategies": [
      {
        "method": "Mock API responses",
        "description": "Use Mock Service Worker (MSW) or similar to simulate errors",
        "example": "Mock 401 response to test login redirect"
      },
      {
        "method": "Trigger validation errors",
        "description": "Submit invalid data to test inline errors",
        "example": "Submit empty form, invalid email, mismatched passwords"
      },
      {
        "method": "Simulate rate limits",
        "description": "Make rapid requests to trigger rate limit errors",
        "example": "Click submit button 10 times rapidly"
      },
      {
        "method": "Network simulation",
        "description": "Use browser DevTools to throttle or block network",
        "example": "Test offline mode, slow 3G, network failure"
      },
      {
        "method": "Use error endpoints",
        "description": "Create test endpoints that return specific error codes",
        "example": "/api/test/error/:code - Returns error with specified code"
      }
    ]
  }
}
